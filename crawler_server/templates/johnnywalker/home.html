{% extends '_base.html' %}
{% load static %}
{% load humanize %}

{% block title %}
    Monitor
{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block body %}
    <h1>Monitor</h1>
    <table class="table table-responsive table-bordered table-striped table-hover">
        <caption>Pending</caption>
        <thead>
        <tr>
            <th>ID</th>
        </tr>
        </thead>
        <tbody>
        {% for m in pending %}
            <tr>
                <td>{{ m.id }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <table class="table table-responsive table-bordered table-striped table-hover">
        <caption>Active</caption>
        <thead>
        <tr>
            <th>Job</th>
            <th>PID</th>
            <th>Start time</th>
            <th>Runtime</th>
            <th>Log</th>
            <th>Size (KB)</th>
        </tr>
        </thead>
        <tbody>
        {% for p in active %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.pid }}</td>
                <td>{{ p.start_time }}</td>
                <td>{{ p.runtime }}</td>
                <td><a target="_blank" href="{{ p.logurl }}">Log</a></td>
                <td>{{ p.size }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <table class="table table-responsive table-bordered table-striped table-hover">
        <caption>Finished</caption>
        <thead>
        <tr>
            <th>Job</th>
            <th>Start time</th>
            <th>Stop time</th>
            <th>Runtime</th>
            <th>Status</th>
            <th>Log</th>
            <th>Size (KB)</th>
        </tr>
        </thead>
        <tbody>
        {% for p in finished %}
            <tr>
                <td>{{ p.jobid }}</td>
                <td>{{ p.starttime }}</td>
                <td>{{ p.stoptime }}</td>
                <td>{{ p.runtime }}</td>
                <td><label class="label label-{% if p.status == 'finished' %}success{% else %}danger{% endif %}">
                    {{ p.status }}</label>
                </td>
                <td><a target="_blank" href="{{ STATIC_URL }}{{ p.logurl }}">Log</a></td>
                <td>{{ p.size }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block scripts %}
{% endblock %}

{% block scriptfiles %}
{% endblock %}

{% block footer %}
{% endblock %}
